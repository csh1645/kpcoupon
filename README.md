# 사전과제 : Rest API 기반 쿠폰시스템

## 1. 프로젝트 소개
  - 사용자에게 할인, 선물등 쿠폰을 제공하는 API 서비스

## 2. 개발 환경
  - openJdk 1.8
  - Spring Boot 2.2.6
  - Maven
  - JPA
  - H2

## 3. 문제해결 전략
  - 랜덤한 코드의 쿠폰을 N개 생성하여 데이터베이스에 보관하는 API
    - 생성개수는 파라미터를 이용
    - 랜던문자수는 3개의 대시를 포함하여 총 15개의 문자로 구성
      - 쿠폰패턴 : XXXX-XXXXX-XXXX
      - 대문자/숫자 조합으로 생성
    - 쿠폰 중복생성을 방지하기 위해 쿠폰 1개 생성 시 DB에서 체크 후 저장
      - 중복 시 생성개수 카운터에서 제외
    - 생성된 쿠폰의 유효기간은 생성일 3일후까지 
        
  - 생성된 쿠폰중 하나를 사용자에게 지급하는 API
    - 가장 최근에 생성된 쿠폰을 조회
    - 지급 로직 적용 후 리턴
  
  - 사용자에게 지급된 쿠폰을 조회하는 API
    - 지급여부 컬럼을 추가하여 관리/조회
  
  - 지급된 쿠폰중 하나를 사용하는 API(쿠폰 재사용은 불가)
    - 쿠폰번호를 이용하여 조회 후 사용여부 체크 후
    - 이미 사용하거나 지급되지 않은 쿠폰은 사용불가
    - 지급되었으나 사용하지 않은 쿠폰인 경우 사용처리 후 리턴
  
  - 지급된 쿠폰중 하나를 사용 취소하는 API를 구현하세요. (취소된 쿠폰 재사용 가능)
    - 쿠폰번호를 이용하여 조회 후 취소여부 체크
    - 사용하지 않거나 지급되지 않은 쿠폰은 취소불가
    - 지급되었으나 사용한 쿠폰인 경우 취소처리 후 리턴
  
  - 발급된 쿠폰중 당일 만료된 전체 쿠폰 목록을 조회하는 API
    - 만료일을 관리하는 컬럼을 추가하여 조회
    - 생성일을 관리하는 컬럼을 추가하여
    
  - 발급된 쿠폰중 만료 3일전 사용자에게 메세지(“쿠폰이 3일 후 만료됩니다.”)를 발송하는 기능
    - 스케줄러를 이용하여 로직 적용
    - 실제 발송은 하지 않고 정해진 시간마다 Console에 확인 가능하도록 구현
      - 1분 주기로 로직 실행

## 4. 프로젝트 빌드
  - 이클립스 기준
    - git을 이용하여 Clone : https://github.com/csh1645/kpcoupon.git
    
## 5. 실행 방법
  - KpcouponApplication.java 실행
    - Run As -> Spring Boot App
  - API 테스트
    - swagger를 이용한 테스트
    - URL : http://localhost/swagger-ui.html
  - H2 DB 경로
    - DB 경로 : http://localhost/console
